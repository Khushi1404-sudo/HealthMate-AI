<!DOCTYPE html>
<html>
<head>
    <style>
        :root { --bg: #0a1628; --card: #1e293b; --blue: #0ea5e9; }
        body { background: var(--bg); color: white; font-family: sans-serif; padding: 20px; display: flex; justify-content: center; }
        .container { width: 100%; max-width: 450px; }
        .card { background: var(--card); padding: 20px; border-radius: 15px; margin-bottom: 15px; border: 1px solid #334155; }
        input { width: 100%; cursor: pointer; }
        button { background: var(--blue); color: white; border: none; padding: 15px; width: 100%; border-radius: 10px; font-weight: bold; cursor: pointer; margin-top: 10px; }
        #result { display: none; margin-top: 20px; padding: 20px; border-radius: 15px; text-align: center; border: 2px solid var(--blue); }
    </style>
</head>
<body>
    <div class="container">
        <h1>HealthMate AI</h1>
        <div class="card">
            <label>Heart Rate: <span id="hr_v">72</span></label>
            <input type="range" id="hr" min="40" max="180" value="72" oninput="document.getElementById('hr_v').innerText=this.value">
            
            <label>Temp (Â°F): <span id="temp_v">98.6</span></label>
            <input type="range" id="temp" min="94" max="105" value="98.6" step="0.1" oninput="document.getElementById('temp_v').innerText=this.value">
            
            <label>Systolic: <span id="sys_v">120</span></label>
            <input type="range" id="sys" min="70" max="200" value="120" oninput="document.getElementById('sys_v').innerText=this.value">
            
            <label>Diastolic: <span id="dia_v">80</span></label>
            <input type="range" id="dia" min="40" max="130" value="80" oninput="document.getElementById('dia_v').innerText=this.value">
            
            <button onclick="sendToPython()">ANALYZE NOW</button>
        </div>
        <div id="result">
            <h2 id="res_title"></h2>
            <p id="res_msg"></p>
        </div>
    </div>

    <script>
        function sendToPython() {
            const data = {
                hr: document.getElementById('hr').value,
                temp: document.getElementById('temp').value,
                sys: document.getElementById('sys').value,
                dia: document.getElementById('dia').value
            };
            // THE BRIDGE: This sends the numbers to Streamlit's Python side
            window.parent.postMessage({
                isStreamlitCommunication: true,
                type: "streamlit:setComponentValue",
                value: JSON.stringify(data)
            }, "*");
        }

        // Listen for the AI's answer coming back from Python
        window.addEventListener("message", (event) => {
            if (event.data.type === "streamlit:render") {
                const args = event.data.args;
                if (args.prediction_msg) {
                    const resDiv = document.getElementById('result');
                    resDiv.style.display = 'block';
                    document.getElementById('res_title').innerText = args.prediction_title;
                    document.getElementById('res_msg').innerText = args.prediction_msg;
                    resDiv.style.borderColor = args.color;
                }
            }
        });
    </script>
</body>
</html>
